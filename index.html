<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ğ’Ğ¾Ğ»Ğº Ğ»Ğ¾Ğ²Ğ¸Ñ‚ ÑĞ¹Ñ†Ğ° â€” Pavel Game Studio</title>
<meta name="description" content="ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¾Ğ²ĞµÑ‚ÑĞºĞ°Ñ Ğ°Ñ€ĞºĞ°Ğ´Ğ° Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ">
<meta property="og:title" content="Ğ’Ğ¾Ğ»Ğº Ğ»Ğ¾Ğ²Ğ¸Ñ‚ ÑĞ¹Ñ†Ğ° â€” Pavel Game Studio">
<meta property="og:description" content="ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¾Ğ²ĞµÑ‚ÑĞºĞ°Ñ Ğ°Ñ€ĞºĞ°Ğ´Ğ° Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='8' fill='%230066A1'/><text x='16' y='23' font-family='Arial' font-size='20' font-weight='bold' fill='%232FC7F7' text-anchor='middle'>P</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• Ğ¦Ğ’Ğ•Ğ¢ĞĞ’
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --cyan:        #2FC7F7;
  --blue:        #0066A1;
  --navy:        #0D2847;
  --deep:        #0A1628;
  --soft-blue:   #B8E6F8;
  --purple:      #7B4FE0;
  --purple-lt:   #A855F7;
  --neon:        #39FF14;
  --neon-dk:     #00D68F;
  --error:       #FF4757;
  --muted:       #8899AA;
  --white:       #FFFFFF;

  --grad-primary:    linear-gradient(135deg, #0066A1, #2FC7F7);
  --grad-action:     linear-gradient(135deg, #39FF14, #00D68F);
  --grad-promo:      linear-gradient(135deg, #7B4FE0, #2FC7F7);
  --grad-purple:     linear-gradient(135deg, #7B4FE0, #A855F7);
  --grad-bg:         linear-gradient(180deg, #0A1628 0%, #0D2847 50%, #0066A1 100%);
  --grad-card:       linear-gradient(135deg, rgba(13,40,71,0.8), rgba(0,102,161,0.3));

  --glass-bg:     rgba(13, 40, 71, 0.6);
  --glass-border: rgba(47, 199, 247, 0.15);
  --glass-shadow: 0 8px 32px rgba(0, 102, 161, 0.3);

  --radius-sm:  8px;
  --radius-md:  12px;
  --radius-lg:  16px;
  --radius-xl:  20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
html, body {
  height: 100%;
  font-family: 'Inter', sans-serif;
  color: var(--white);
  user-select: none;
  -webkit-user-select: none;
  overflow: hidden;
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  background: var(--grad-bg);
  background-attachment: fixed;
  animation: bgShift 15s ease-in-out infinite alternate;
}

@keyframes bgShift {
  0%   { background-position: 0% 0%; }
  100% { background-position: 0% 20%; }
}

/* Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¿ÑÑ‚Ğ½Ğ° */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 55% 35% at 10% 70%, rgba(47,199,247,0.08) 0%, transparent 65%),
    radial-gradient(ellipse 45% 30% at 90% 20%, rgba(0,102,161,0.14) 0%, transparent 65%),
    radial-gradient(ellipse 35% 25% at 50% 95%, rgba(123,79,224,0.1) 0%, transparent 55%);
  pointer-events: none;
  z-index: 0;
  animation: glowPulse 10s ease-in-out infinite alternate;
}
@keyframes glowPulse {
  0%   { opacity: 0.6; }
  100% { opacity: 1; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ›ĞĞ“ĞĞ¢Ğ˜ĞŸ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.logo {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 20px 0 8px;
}

.logo-text {
  font-family: 'Orbitron', sans-serif;
  font-weight: 900;
  font-size: 2.5rem;
  letter-spacing: 0.05em;
  background: linear-gradient(90deg, #2FC7F7, #7B4FE0);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: logoPulse 3s ease-in-out infinite alternate;
}
@keyframes logoPulse {
  0%   { filter: drop-shadow(0 0 12px rgba(47,199,247,0.3)); }
  100% { filter: drop-shadow(0 0 30px rgba(47,199,247,0.7)); }
}

.logo-line {
  height: 2px;
  background: linear-gradient(90deg, #0066A1, #2FC7F7, #7B4FE0);
  margin: 6px auto 4px;
  width: 200px;
  border-radius: 1px;
}

.logo-sub {
  font-size: 0.65rem;
  letter-spacing: 0.4em;
  color: var(--muted);
  text-transform: uppercase;
  font-weight: 600;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ­ĞšĞ ĞĞĞ«
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen {
  display: none;
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 560px;
  padding: 0 16px 24px;
  animation: fadeUp 0.45s cubic-bezier(0.22,1,0.36,1) both;
}
.screen.active { display: block; }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ“Ğ›ĞĞ’ĞĞĞ• ĞœĞ•ĞĞ®
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.menu-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.7rem;
  font-weight: 900;
  text-align: center;
  margin: 14px 0 6px;
  color: var(--white);
  text-shadow: 0 0 20px rgba(47,199,247,0.5);
  animation: titleGlow 2.5s ease-in-out infinite alternate;
  letter-spacing: 0.03em;
}
@keyframes titleGlow {
  0%   { text-shadow: 0 0 10px rgba(47,199,247,0.3); }
  100% { text-shadow: 0 0 28px rgba(47,199,247,0.75), 0 0 50px rgba(47,199,247,0.3); }
}

.menu-subtitle {
  text-align: center;
  color: var(--muted);
  font-size: 0.85rem;
  margin-bottom: 22px;
  letter-spacing: 0.06em;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ĞšĞĞĞŸĞšĞ˜
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
  display: block;
  width: 100%;
  padding: 14px 28px;
  border: none;
  border-radius: 10px;
  font-family: 'Inter', sans-serif;
  font-size: 0.95rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.25s ease;
  margin-bottom: 10px;
  letter-spacing: 0.03em;
  position: relative;
  overflow: hidden;
  color: var(--white);
}
.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0);
  transition: background 0.25s;
}
.btn:hover::after { background: rgba(255,255,255,0.1); }
.btn:active { transform: scale(0.96) !important; opacity: 0.9; }

/* ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ (Primary) */
.btn-primary {
  background: var(--grad-primary);
  box-shadow: 0 4px 20px rgba(0,102,161,0.4);
}
.btn-primary:hover {
  transform: scale(1.03);
  box-shadow: 0 0 20px rgba(47,199,247,0.5), 0 6px 28px rgba(0,102,161,0.5);
}

/* Ğ¤Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ğ°Ñ */
.btn-purple {
  background: var(--grad-purple);
  box-shadow: 0 4px 20px rgba(123,79,224,0.4);
}
.btn-purple:hover {
  transform: scale(1.03);
  box-shadow: 0 0 20px rgba(123,79,224,0.55), 0 6px 28px rgba(123,79,224,0.4);
}

/* Ğ’Ñ‚Ğ¾Ñ€Ğ¸Ñ‡Ğ½Ğ°Ñ */
.btn-secondary {
  background: transparent;
  border: 1px solid var(--cyan);
  color: var(--cyan);
}
.btn-secondary:hover {
  background: rgba(47,199,247,0.1);
  transform: scale(1.02);
  box-shadow: 0 0 14px rgba(47,199,247,0.2);
}

/* Danger / ĞºÑ€Ğ°ÑĞ½Ğ°Ñ */
.btn-danger {
  background: linear-gradient(135deg, #c0392b, #962d22);
  box-shadow: 0 4px 20px rgba(192,57,43,0.4);
}
.btn-danger:hover {
  transform: scale(1.03);
  box-shadow: 0 0 18px rgba(255,71,87,0.45);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLASSMORPHISM ĞšĞĞ Ğ¢ĞĞ§ĞšĞ˜
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--glass-shadow);
}

.card {
  padding: 16px 18px;
  margin-bottom: 12px;
}

/* Ğ ĞµĞºĞ¾Ñ€Ğ´ */
.hs-card { text-align: center; }
.hs-label {
  font-size: 0.68rem;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.2em;
  text-transform: uppercase;
}
.hs-value {
  font-family: 'Orbitron', sans-serif;
  font-size: 2.4rem;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: 0 0 16px rgba(47,199,247,0.5);
  margin-top: 4px;
  line-height: 1;
}

/* Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ */
.ctrl-card h3 {
  font-size: 0.68rem;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.2em;
  text-transform: uppercase;
  margin-bottom: 14px;
}
.ctrl-section {
  font-size: 0.72rem;
  color: var(--soft-blue);
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin: 10px 0 8px;
}
.ctrl-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.ctrl-item {
  display: flex; align-items: center; gap: 10px;
  font-size: 0.82rem; color: var(--soft-blue); font-weight: 500;
}
.key {
  display: inline-flex; align-items: center; justify-content: center;
  width: 32px; height: 32px;
  background: rgba(47,199,247,0.12);
  border: 1px solid rgba(47,199,247,0.35);
  border-radius: 6px;
  font-size: 1rem; font-weight: 700; color: var(--cyan);
  flex-shrink: 0;
}
.ctrl-note {
  font-size: 0.74rem;
  color: var(--muted);
  margin-top: 8px;
  line-height: 1.65;
}

.footer {
  text-align: center;
  color: var(--muted);
  font-size: 0.72rem;
  margin-top: 14px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ˜Ğ“Ğ ĞĞ’ĞĞ™ Ğ­ĞšĞ ĞĞ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-game { padding: 0; max-width: 560px; }

.game-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: rgba(10,22,40,0.8);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(47,199,247,0.15);
}

.score-block { font-family: 'Orbitron', sans-serif; }
.score-label {
  font-size: 0.58rem;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.22em;
  text-transform: uppercase;
}
.score-value {
  font-size: 2rem;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: 0 0 14px rgba(47,199,247,0.6);
  line-height: 1;
}
.score-value.bounce { animation: scoreBounce 0.28s ease; }
@keyframes scoreBounce {
  0%   { transform: scale(1); }
  45%  { transform: scale(1.3); }
  100% { transform: scale(1); }
}

.header-center { display: flex; align-items: center; gap: 8px; }

.mode-badge {
  font-family: 'Orbitron', sans-serif;
  font-size: 0.62rem;
  font-weight: 700;
  padding: 4px 12px;
  border-radius: 20px;
  background: linear-gradient(135deg, rgba(123,79,224,0.35), rgba(47,199,247,0.25));
  border: 1px solid rgba(123,79,224,0.4);
  color: var(--soft-blue);
  letter-spacing: 0.1em;
}

.sound-btn {
  background: rgba(47,199,247,0.08);
  border: 1px solid rgba(47,199,247,0.2);
  border-radius: var(--radius-sm);
  color: var(--soft-blue);
  cursor: pointer;
  padding: 5px 9px;
  font-size: 0.95rem;
  transition: all 0.2s;
  line-height: 1;
}
.sound-btn:hover {
  background: rgba(47,199,247,0.18);
  color: var(--cyan);
  border-color: rgba(47,199,247,0.5);
}

.lives-block { display: flex; gap: 6px; align-items: center; }
.life-icon {
  font-size: 1.35rem;
  transition: all 0.3s ease;
  filter: drop-shadow(0 0 6px rgba(57,255,20,0.5));
}
.life-icon.lost {
  filter: grayscale(1) opacity(0.25);
  transform: scale(0.75);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ˜Ğ“Ğ ĞĞ’ĞĞ• ĞŸĞĞ›Ğ•
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#game-field {
  position: relative;
  width: 100%;
  background: linear-gradient(180deg, #080f22 0%, #0D2847 100%);
  overflow: hidden;
  border-left: 1px solid rgba(47,199,247,0.2);
  border-right: 1px solid rgba(47,199,247,0.2);
  box-shadow: inset 0 0 40px rgba(0,102,161,0.2);
}

/* Ğ¢Ğ¾Ñ‡ĞµÑ‡Ğ½Ğ°Ñ ÑĞµÑ‚ĞºĞ° â€” Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ğµ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ */
#game-field::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(1px 1px at  8% 12%, rgba(47,199,247,0.35) 0%, transparent 100%),
    radial-gradient(1px 1px at 28% 38%, rgba(47,199,247,0.22) 0%, transparent 100%),
    radial-gradient(1px 1px at 54% 8%,  rgba(47,199,247,0.30) 0%, transparent 100%),
    radial-gradient(1px 1px at 73% 55%, rgba(47,199,247,0.22) 0%, transparent 100%),
    radial-gradient(1px 1px at 92% 22%, rgba(47,199,247,0.35) 0%, transparent 100%),
    radial-gradient(1px 1px at 17% 70%, rgba(47,199,247,0.18) 0%, transparent 100%),
    radial-gradient(1px 1px at 62% 80%, rgba(47,199,247,0.25) 0%, transparent 100%),
    radial-gradient(1px 1px at 42% 90%, rgba(47,199,247,0.20) 0%, transparent 100%);
  pointer-events: none;
  z-index: 0;
}

.field-inner { position: relative; width: 100%; height: 100%; }

/* ĞšÑƒÑ€Ğ¸Ñ†Ñ‹ */
.chicken {
  position: absolute;
  font-size: 1.9rem;
  z-index: 10;
  filter: drop-shadow(0 0 8px rgba(47,199,247,0.3));
  transition: transform 0.15s;
}
.chicken.lay { animation: chickenLay 0.38s ease; }
@keyframes chickenLay {
  0%   { transform: scale(1) rotate(0deg); }
  35%  { transform: scale(1.35) rotate(-18deg); }
  70%  { transform: scale(1.1) rotate(10deg); }
  100% { transform: scale(1) rotate(0deg); }
}

/* Ğ–Ñ‘Ğ»Ğ¾Ğ±Ğ° */
.lane {
  position: absolute;
  transform-origin: 0 50%;
  background: linear-gradient(90deg, rgba(0,102,161,0.55), rgba(47,199,247,0.35));
  border: 1px solid rgba(47,199,247,0.25);
  border-radius: 4px;
  box-shadow: 0 0 12px rgba(47,199,247,0.12);
}

/* Ğ¯Ğ¹Ñ†Ğ° */
.egg {
  position: absolute;
  font-size: 1.45rem;
  z-index: 20;
  pointer-events: none;
  transition: left 0.38s cubic-bezier(0.4,0,0.2,1), top 0.38s cubic-bezier(0.4,0,0.2,1);
  filter: drop-shadow(0 0 6px rgba(47,199,247,0.4));
}
.egg.caught { animation: eggCaught 0.42s ease forwards; }
@keyframes eggCaught {
  0%   { transform: scale(1); opacity: 1; filter: drop-shadow(0 0 6px rgba(47,199,247,0.4)); }
  40%  { transform: scale(1.8); filter: drop-shadow(0 0 20px rgba(57,255,20,0.9)) brightness(2); }
  100% { transform: scale(0); opacity: 0; }
}
.egg.broken { animation: eggBroken 0.5s ease forwards; }
@keyframes eggBroken {
  0%   { transform: scale(1) rotate(0deg); opacity: 1; filter: drop-shadow(0 0 6px rgba(47,199,247,0.4)); }
  35%  { transform: scale(1.5) rotate(22deg); filter: drop-shadow(0 0 16px rgba(255,71,87,0.9)); }
  100% { transform: scale(0.4) rotate(50deg); opacity: 0; }
}

/* Ğ’Ğ¾Ğ»Ğº */
#wolf {
  position: absolute;
  z-index: 30;
  text-align: center;
  pointer-events: none;
  transition: left 0.13s cubic-bezier(0.34,1.4,0.64,1), top 0.13s cubic-bezier(0.34,1.4,0.64,1);
}
.wolf-emoji {
  font-size: 2rem;
  display: block;
  filter: drop-shadow(0 0 8px rgba(47,199,247,0.5));
}
.wolf-basket {
  font-size: 1.1rem;
  display: block;
  margin-top: -5px;
  filter: drop-shadow(0 0 5px rgba(47,199,247,0.3));
}

/* Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚Ğ¾Ğµ ÑĞ¹Ñ†Ğ¾ */
.splat {
  position: absolute;
  font-size: 1.1rem;
  z-index: 15;
  pointer-events: none;
  animation: splatAnim 0.9s ease forwards;
}
@keyframes splatAnim {
  0%   { transform: scale(0.4); opacity: 1; }
  35%  { transform: scale(1.6); opacity: 1; }
  100% { transform: scale(1.1); opacity: 0; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ĞĞ˜Ğ–ĞĞ˜Ğ• ĞšĞĞĞŸĞšĞ˜ Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.game-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: rgba(10,22,40,0.8);
  backdrop-filter: blur(14px);
  border-top: 1px solid rgba(47,199,247,0.15);
  gap: 8px;
}

/* D-pad 2Ã—2 */
.dpad { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }

.touch-btn {
  width: 60px;
  height: 54px;
  border: 1px solid rgba(47,199,247,0.2);
  border-radius: 10px;
  font-size: 1.35rem;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--white);
  gap: 2px;
  position: relative;
  overflow: hidden;
}
.touch-btn:active { transform: scale(0.86) !important; }

/* Ğ›ĞµĞ²Ğ¾-Ğ²ĞµÑ€Ñ… */
.touch-btn.tl {
  background: linear-gradient(135deg, rgba(0,102,161,0.7), rgba(47,199,247,0.3));
  box-shadow: 0 0 12px rgba(0,102,161,0.3);
}
/* Ğ›ĞµĞ²Ğ¾-Ğ½Ğ¸Ğ· */
.touch-btn.bl {
  background: linear-gradient(135deg, rgba(0,80,130,0.7), rgba(0,102,161,0.35));
  box-shadow: 0 0 12px rgba(0,80,130,0.3);
}
/* ĞŸÑ€Ğ°Ğ²Ğ¾-Ğ²ĞµÑ€Ñ… */
.touch-btn.tr {
  background: linear-gradient(135deg, rgba(123,79,224,0.7), rgba(47,199,247,0.3));
  box-shadow: 0 0 12px rgba(123,79,224,0.3);
}
/* ĞŸÑ€Ğ°Ğ²Ğ¾-Ğ½Ğ¸Ğ· */
.touch-btn.br {
  background: linear-gradient(135deg, rgba(100,55,200,0.7), rgba(123,79,224,0.35));
  box-shadow: 0 0 12px rgba(100,55,200,0.3);
}

.touch-btn:hover {
  border-color: rgba(47,199,247,0.5);
  transform: scale(1.05);
  box-shadow: 0 0 16px rgba(47,199,247,0.35);
}

.touch-btn.active-pos {
  border-color: var(--cyan);
  box-shadow: 0 0 20px rgba(47,199,247,0.65);
  filter: brightness(1.35);
}

.touch-btn-icon  { font-size: 1.3rem; line-height: 1; }
.touch-btn-label {
  font-size: 0.48rem;
  color: rgba(184,230,248,0.7);
  font-family: 'Inter', sans-serif;
  font-weight: 700;
  letter-spacing: 0.04em;
}

/* ĞŸĞ°ÑƒĞ·Ğ° */
.pause-btn {
  background: rgba(47,199,247,0.08);
  border: 1px solid rgba(47,199,247,0.22);
  border-radius: 10px;
  color: var(--soft-blue);
  cursor: pointer;
  padding: 0 12px;
  font-size: 1.1rem;
  transition: all 0.2s;
  height: 54px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
}
.pause-btn:hover {
  background: rgba(47,199,247,0.18);
  color: var(--cyan);
  border-color: rgba(47,199,247,0.5);
  box-shadow: 0 0 14px rgba(47,199,247,0.25);
}
.pause-btn-label {
  font-size: 0.48rem;
  color: var(--muted);
  font-weight: 700;
  letter-spacing: 0.05em;
}

/* ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ (Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿) */
.kb-hint {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}
.kb-row { display: flex; gap: 3px; }
.kb-key {
  width: 26px; height: 26px;
  background: rgba(47,199,247,0.1);
  border: 1px solid rgba(47,199,247,0.25);
  border-radius: 5px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.82rem;
  color: var(--soft-blue);
  font-weight: 700;
}
.kb-hint-label {
  font-size: 0.5rem;
  color: var(--muted);
  margin-top: 3px;
  text-align: center;
  letter-spacing: 0.06em;
  font-weight: 600;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ĞĞ’Ğ•Ğ Ğ›Ğ•Ğ˜
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.overlay {
  position: fixed;
  inset: 0;
  z-index: 200;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(10,22,40,0.85);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  animation: fadeIn 0.25s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal {
  background: rgba(13,40,71,0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(123,79,224,0.35);
  border-radius: var(--radius-xl);
  padding: 34px 30px;
  text-align: center;
  max-width: 350px;
  width: 90%;
  box-shadow:
    0 24px 64px rgba(0,0,0,0.55),
    0 0 40px rgba(47,199,247,0.08),
    inset 0 1px 0 rgba(47,199,247,0.1);
  animation: modalPop 0.42s cubic-bezier(0.34,1.56,0.64,1);
}
@keyframes modalPop {
  from { transform: scale(0.8) translateY(16px); opacity: 0; }
  to   { transform: scale(1) translateY(0); opacity: 1; }
}

.modal-title-go {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.4rem;
  font-weight: 900;
  margin-bottom: 20px;
  background: linear-gradient(135deg, #FF4757, #ff6b7a);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 12px rgba(255,71,87,0.5));
}

.modal-score-label {
  font-size: 0.65rem;
  font-weight: 700;
  color: var(--muted);
  letter-spacing: 0.22em;
  text-transform: uppercase;
}

.modal-score {
  font-family: 'Orbitron', sans-serif;
  font-size: 3.2rem;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: 0 0 20px rgba(47,199,247,0.7);
  margin: 8px 0 6px;
  animation: countIn 0.5s cubic-bezier(0.34,1.4,0.64,1);
}
@keyframes countIn {
  from { transform: scale(0.5); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

.modal-hs {
  font-size: 0.88rem;
  color: var(--soft-blue);
  margin-bottom: 22px;
}

.new-record-badge {
  font-family: 'Orbitron', sans-serif;
  font-size: 0.88rem;
  font-weight: 900;
  color: var(--neon);
  background: rgba(57,255,20,0.1);
  border: 1px solid rgba(57,255,20,0.35);
  border-radius: 20px;
  padding: 5px 16px;
  margin-bottom: 12px;
  display: inline-block;
  text-shadow: 0 0 12px rgba(57,255,20,0.6);
  animation: recordPop 0.5s 0.2s both cubic-bezier(0.34,1.56,0.64,1), neonPulse 1.5s 0.7s ease-in-out infinite alternate;
}
@keyframes recordPop {
  from { transform: scale(0); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}
@keyframes neonPulse {
  0%   { text-shadow: 0 0 8px rgba(57,255,20,0.5); }
  100% { text-shadow: 0 0 20px rgba(57,255,20,0.9), 0 0 40px rgba(57,255,20,0.4); }
}

.pause-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8rem;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: 0 0 18px rgba(47,199,247,0.5);
  margin-bottom: 24px;
  letter-spacing: 0.05em;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ğ­Ğ¤Ğ¤Ğ•ĞšĞ¢Ğ« / ĞĞĞ˜ĞœĞĞ¦Ğ˜Ğ˜
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.shake { animation: shake 0.32s ease; }
@keyframes shake {
  0%,100% { transform: translateX(0); }
  15%  { transform: translateX(-9px); }
  30%  { transform: translateX(9px); }
  45%  { transform: translateX(-6px); }
  65%  { transform: translateX(6px); }
  82%  { transform: translateX(-3px); }
}

.flash-red { animation: flashRed 0.42s ease; }
@keyframes flashRed {
  0%,100% { box-shadow: inset 0 0 40px rgba(0,102,161,0.2); }
  50% {
    box-shadow:
      inset 0 0 60px rgba(255,71,87,0.45),
      inset 0 0 120px rgba(123,79,224,0.2),
      0 0 40px rgba(255,71,87,0.2);
  }
}

/* ĞŸĞ°ÑÑ…Ğ°Ğ»ĞºĞ° */
.easter-msg {
  position: fixed;
  top: 40%; left: 50%;
  transform: translate(-50%,-50%);
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8rem;
  font-weight: 900;
  color: var(--neon);
  text-shadow: 0 0 28px rgba(57,255,20,0.8);
  z-index: 300;
  animation: easterPop 2.1s ease forwards;
  pointer-events: none;
  letter-spacing: 0.05em;
}
@keyframes easterPop {
  0%   { transform: translate(-50%,-50%) scale(0); opacity: 0; }
  18%  { transform: translate(-50%,-60%) scale(1.15); opacity: 1; }
  72%  { transform: translate(-50%,-60%) scale(1); opacity: 1; }
  100% { transform: translate(-50%,-80%) scale(0.8); opacity: 0; }
}

/* Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿: dim d-pad â€” ÑÑ‚Ñ€ĞµĞ»ĞºĞ¸ Ğ² Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğµ */
@media (hover: hover) and (pointer: fine) {
  .dpad { opacity: 0.65; transition: opacity 0.2s; }
  .dpad:hover { opacity: 1; }
  .kb-hint { opacity: 1; }
}
@media (hover: none) and (pointer: coarse) {
  .kb-hint { display: none; }
  .dpad { opacity: 1; }
}

@media (max-width: 420px) {
  .logo-text  { font-size: 1.9rem; }
  .menu-title { font-size: 1.4rem; }
  .touch-btn  { width: 52px; height: 48px; font-size: 1.2rem; }
  .chicken    { font-size: 1.5rem; }
  .wolf-emoji { font-size: 1.7rem; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• Ğ›ĞĞ“ĞĞ¢Ğ˜ĞŸ â•â•â•â•â•â•â•â•â•â• -->
<div class="logo">
  <div class="logo-text">Pavel</div>
  <div class="logo-line"></div>
  <div class="logo-sub">Game Studio</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• ĞœĞ•ĞĞ® â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-menu" class="screen active">
  <div class="menu-title">ğŸ¥š Ğ’ĞĞ›Ğš Ğ›ĞĞ’Ğ˜Ğ¢ Ğ¯Ğ™Ğ¦Ğ</div>
  <div class="menu-subtitle">ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¾Ğ²ĞµÑ‚ÑĞºĞ°Ñ Ğ°Ñ€ĞºĞ°Ğ´Ğ°</div>

  <button class="btn btn-primary" onclick="Game.start('A')">ğŸ® Ğ˜Ğ³Ñ€Ğ° A â€” ĞĞ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾</button>
  <button class="btn btn-purple"  onclick="Game.start('B')">âš¡ Ğ˜Ğ³Ñ€Ğ° B â€” Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾</button>

  <div class="glass card hs-card">
    <div class="hs-label">ğŸ† Ğ ĞµĞºĞ¾Ñ€Ğ´</div>
    <div class="hs-value" id="menu-highscore">000</div>
  </div>

  <div class="glass card ctrl-card">
    <h3>âŒ¨ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ</h3>
    <div class="ctrl-section">ğŸ’» ĞšĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€ â€” ÑÑ‚Ñ€ĞµĞ»ĞºĞ¸ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹</div>
    <div class="ctrl-grid">
      <div class="ctrl-item"><span class="key">â†</span> Ğ›ĞµĞ²Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°</div>
      <div class="ctrl-item"><span class="key">â†’</span> ĞŸÑ€Ğ°Ğ²Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°</div>
      <div class="ctrl-item"><span class="key">â†‘</span> Ğ’ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ Ğ¶Ñ‘Ğ»Ğ¾Ğ±</div>
      <div class="ctrl-item"><span class="key">â†“</span> ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ¶Ñ‘Ğ»Ğ¾Ğ±</div>
    </div>
    <div class="ctrl-note">
      Ğ¡Ñ‚Ñ€ĞµĞ»ĞºĞ¸ â€” Ğ´Ğ²Ğµ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ğ¾ÑĞ¸.<br>
      â† + â†‘ = Ğ»ĞµĞ²Ğ¾-Ğ²ĞµÑ€Ñ… &nbsp;|&nbsp; â† + â†“ = Ğ»ĞµĞ²Ğ¾-Ğ½Ğ¸Ğ·<br>
      â†’ + â†‘ = Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ²ĞµÑ€Ñ… &nbsp;|&nbsp; â†’ + â†“ = Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ½Ğ¸Ğ·
    </div>
    <div class="ctrl-section" style="margin-top:14px;">ğŸ“± ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ â€” ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ</div>
    <div class="ctrl-note">4 ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ (â†– â†™ â†— â†˜) â€” ĞºĞ°Ğ¶Ğ´Ğ°Ñ Ğ¾Ğ´Ğ½Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ²Ğ¾Ğ»ĞºĞ°</div>
  </div>

  <div class="footer">Â© 2025 Pavel Game Studio</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• Ğ˜Ğ“Ğ Ğ â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-game" class="screen">

  <!-- Ğ¨Ğ°Ğ¿ĞºĞ° -->
  <div class="game-header">
    <div class="score-block">
      <div class="score-label">Ğ¡Ñ‡Ñ‘Ñ‚</div>
      <div class="score-value" id="score-display">000</div>
    </div>
    <div class="header-center">
      <span class="mode-badge" id="mode-display">Ğ ĞµĞ¶Ğ¸Ğ¼ A</span>
      <button class="sound-btn" id="sound-toggle" onclick="Sound.toggle()">ğŸ”Š</button>
    </div>
    <div class="lives-block">
      <span class="life-icon" id="life-0">ğŸ¥š</span>
      <span class="life-icon" id="life-1">ğŸ¥š</span>
      <span class="life-icon" id="life-2">ğŸ¥š</span>
    </div>
  </div>

  <!-- ĞŸĞ¾Ğ»Ğµ -->
  <div id="game-field">
    <div class="field-inner" id="field-inner">
      <div class="chicken" id="chicken-0">ğŸ”</div>
      <div class="chicken" id="chicken-1">ğŸ”</div>
      <div class="chicken" id="chicken-2">ğŸ”</div>
      <div class="chicken" id="chicken-3">ğŸ”</div>
      <div id="wolf">
        <span class="wolf-emoji">ğŸº</span>
        <span class="wolf-basket">ğŸ§º</span>
      </div>
    </div>
  </div>

  <!-- ĞĞ¸Ğ¶Ğ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ -->
  <div class="game-controls">

    <!-- D-pad -->
    <div class="dpad">
      <button class="touch-btn tl" id="btn-0"
        ontouchstart="Wolf.moveTo(0);return false;" onclick="Wolf.moveTo(0)">
        <span class="touch-btn-icon">â†–</span>
        <span class="touch-btn-label">Ğ›Ğ•Ğ’Ğ-Ğ’Ğ•Ğ Ğ¥</span>
      </button>
      <button class="touch-btn tr" id="btn-2"
        ontouchstart="Wolf.moveTo(2);return false;" onclick="Wolf.moveTo(2)">
        <span class="touch-btn-icon">â†—</span>
        <span class="touch-btn-label">ĞŸĞ ĞĞ’Ğ-Ğ’Ğ•Ğ Ğ¥</span>
      </button>
      <button class="touch-btn bl" id="btn-1"
        ontouchstart="Wolf.moveTo(1);return false;" onclick="Wolf.moveTo(1)">
        <span class="touch-btn-icon">â†™</span>
        <span class="touch-btn-label">Ğ›Ğ•Ğ’Ğ-ĞĞ˜Ğ—</span>
      </button>
      <button class="touch-btn br" id="btn-3"
        ontouchstart="Wolf.moveTo(3);return false;" onclick="Wolf.moveTo(3)">
        <span class="touch-btn-icon">â†˜</span>
        <span class="touch-btn-label">ĞŸĞ ĞĞ’Ğ-ĞĞ˜Ğ—</span>
      </button>
    </div>

    <!-- Ğ¦ĞµĞ½Ñ‚Ñ€: Ğ¿Ğ°ÑƒĞ·Ğ° + ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ Ñ…Ğ¸Ğ½Ñ‚ -->
    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
      <button class="pause-btn" onclick="Game.pause()">
        <span>â¸</span>
        <span class="pause-btn-label">ESC</span>
      </button>
      <div class="kb-hint">
        <div class="kb-row"><div class="kb-key">â†‘</div></div>
        <div class="kb-row">
          <div class="kb-key">â†</div>
          <div class="kb-key">â†“</div>
          <div class="kb-key">â†’</div>
        </div>
        <div class="kb-hint-label">Ğ¡Ğ¢Ğ Ğ•Ğ›ĞšĞ˜</div>
      </div>
    </div>

    <!-- Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ° -->
    <div style="display:flex;align-items:center;justify-content:center;width:136px;">
      <div style="font-size:0.6rem;color:var(--muted);line-height:1.9;text-align:left;">
        â† â†‘ &nbsp;Ğ»ĞµĞ²Ğ¾â€‘Ğ²ĞµÑ€Ñ…<br>
        â† â†“ &nbsp;Ğ»ĞµĞ²Ğ¾â€‘Ğ½Ğ¸Ğ·<br>
        â†’ â†‘ &nbsp;Ğ¿Ñ€Ğ°Ğ²Ğ¾â€‘Ğ²ĞµÑ€Ñ…<br>
        â†’ â†“ &nbsp;Ğ¿Ñ€Ğ°Ğ²Ğ¾â€‘Ğ½Ğ¸Ğ·
      </div>
    </div>

  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• ĞŸĞĞ£Ğ—Ğ â•â•â•â•â•â•â•â•â•â• -->
<div id="overlay-pause" class="overlay" style="display:none;">
  <div class="modal">
    <div class="pause-title">â¸ ĞŸĞĞ£Ğ—Ğ</div>
    <button class="btn btn-primary"   onclick="Game.resume()">â–¶ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ</button>
    <button class="btn btn-secondary" onclick="Game.toMenu()">ğŸ  Ğ’Ñ‹Ñ…Ğ¾Ğ´ Ğ² Ğ¼ĞµĞ½Ñ</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• GAME OVER â•â•â•â•â•â•â•â•â•â• -->
<div id="overlay-gameover" class="overlay" style="display:none;">
  <div class="modal">
    <div class="modal-title-go">ğŸ’€ Ğ˜Ğ“Ğ Ğ ĞĞšĞĞĞ§Ğ•ĞĞ</div>
    <div class="modal-score-label">Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‡Ñ‘Ñ‚</div>
    <div class="modal-score" id="go-score">000</div>
    <div class="new-record-badge" id="go-newrecord" style="display:none">ğŸŒŸ ĞĞĞ’Ğ«Ğ™ Ğ Ğ•ĞšĞĞ Ğ”!</div>
    <div class="modal-hs" id="go-highscore">Ğ ĞµĞºĞ¾Ñ€Ğ´: 000</div>
    <button class="btn btn-primary"   onclick="Game.restart()">ğŸ”„ Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ°</button>
    <button class="btn btn-secondary" onclick="Game.toMenu()">ğŸ  ĞœĞµĞ½Ñ</button>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SOUND â€” Web Audio API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Sound = (() => {
  let ctx = null, on = true;
  function ac() {
    if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
    return ctx;
  }
  function tone(freq, dur, type='sine', vol=0.28, delay=0) {
    if (!on) return;
    try {
      const c=ac(), o=c.createOscillator(), g=c.createGain();
      o.connect(g); g.connect(c.destination);
      o.type=type; o.frequency.value=freq;
      const t=c.currentTime+delay;
      g.gain.setValueAtTime(vol,t);
      g.gain.exponentialRampToValueAtTime(0.001,t+dur);
      o.start(t); o.stop(t+dur+0.01);
    } catch(e){}
  }
  function noise(dur,vol=0.18) {
    if (!on) return;
    try {
      const c=ac(), buf=c.createBuffer(1,c.sampleRate*dur,c.sampleRate);
      const d=buf.getChannelData(0);
      for(let i=0;i<d.length;i++) d[i]=Math.random()*2-1;
      const s=c.createBufferSource(); s.buffer=buf;
      const g=c.createGain(); s.connect(g); g.connect(c.destination);
      g.gain.setValueAtTime(vol,c.currentTime);
      g.gain.exponentialRampToValueAtTime(0.001,c.currentTime+dur);
      s.start();
    } catch(e){}
  }
  return {
    playCapture(){ tone(900,0.08,'sine',0.3); tone(1200,0.1,'sine',0.2,0.07); },
    playMiss()   { tone(220,0.32,'sawtooth',0.28); },
    playGameOver(){ tone(440,0.22,'sine',0.3,0); tone(330,0.22,'sine',0.3,0.25); tone(220,0.5,'sine',0.35,0.5); },
    playClick()  { noise(0.045,0.12); },
    playBonus()  { [523,659,784,1047].forEach((f,i)=>tone(f,0.14,'sine',0.22,i*0.11)); },
    toggle()     { on=!on; document.getElementById('sound-toggle').textContent=on?'ğŸ”Š':'ğŸ”‡'; }
  };
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCORE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Score = (() => {
  let score=0, misses=0, lastBonus=0;
  let hs=parseInt(localStorage.getItem('wolfHS3')||'0');
  function rScore() {
    const el=document.getElementById('score-display');
    el.textContent=String(score).padStart(3,'0');
    el.classList.remove('bounce'); void el.offsetWidth; el.classList.add('bounce');
    setTimeout(()=>el.classList.remove('bounce'),300);
  }
  function rLives() {
    for(let i=0;i<3;i++)
      document.getElementById('life-'+i).classList.toggle('lost', i>=(3-misses));
  }
  return {
    reset(){ score=0; misses=0; lastBonus=0; rScore(); rLives(); },
    add(){
      score=Math.min(score+1,999); rScore();
      const b=Math.floor(score/100);
      if(b>lastBonus){
        lastBonus=b;
        if(misses>0){ misses--; rLives(); }
        Sound.playBonus();
        const m={1:'ğŸ‰ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾!',2:'ğŸ”¥ ĞœĞ°ÑÑ‚ĞµÑ€!',5:'ğŸ‘‘ Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°!'};
        if(m[b]) showEaster(m[b]);
      }
    },
    addMiss(){ misses++; rLives(); return misses; },
    get score(){ return score; },
    get misses(){ return misses; },
    get hs(){ return hs; },
    saveHs(){ if(score>hs){ hs=score; localStorage.setItem('wolfHS3',hs); return true; } return false; },
    updateMenuHs(){ document.getElementById('menu-highscore').textContent=String(hs).padStart(3,'0'); }
  };
})();

function showEaster(msg){
  const el=document.createElement('div');
  el.className='easter-msg'; el.textContent=msg;
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),2200);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const UI = {
  showMenu(){
    document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
    document.getElementById('screen-menu').classList.add('active');
    Score.updateMenuHs();
    document.getElementById('overlay-gameover').style.display='none';
    document.getElementById('overlay-pause').style.display='none';
  },
  showGame(){
    document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
    document.getElementById('screen-game').classList.add('active');
  },
  showPause()  { document.getElementById('overlay-pause').style.display='flex'; },
  hidePause()  { document.getElementById('overlay-pause').style.display='none'; },
  showGameOver(isNew){
    document.getElementById('go-score').textContent=String(Score.score).padStart(3,'0');
    document.getElementById('go-highscore').textContent='Ğ ĞµĞºĞ¾Ñ€Ğ´: '+String(Score.hs).padStart(3,'0');
    document.getElementById('go-newrecord').style.display=isNew?'inline-block':'none';
    document.getElementById('overlay-gameover').style.display='flex';
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GAME FIELD â€” ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const GF = {
  sz(){ const f=document.getElementById('game-field'); return {W:f.offsetWidth, H:f.offsetHeight}; },
  // lane 0=Ğ»ĞµĞ²Ğ¾-Ğ²ĞµÑ€Ñ…, 1=Ğ»ĞµĞ²Ğ¾-Ğ½Ğ¸Ğ·, 2=Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ²ĞµÑ€Ñ…, 3=Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ½Ğ¸Ğ·; step 0..3
  eggPos(lane, step){
    const {W,H}=this.sz();
    const c=[
      {sx:W*.12,sy:H*.10,ex:W*.20,ey:H*.70},
      {sx:W*.12,sy:H*.40,ex:W*.24,ey:H*.80},
      {sx:W*.88,sy:H*.10,ex:W*.80,ey:H*.70},
      {sx:W*.88,sy:H*.40,ex:W*.76,ey:H*.80},
    ][lane];
    const t=step/3;
    return {x: c.sx+(c.ex-c.sx)*t-12, y: c.sy+(c.ey-c.sy)*t-12};
  },
  chickenPos(lane){
    const {W,H}=this.sz();
    return [{x:W*.04,y:H*.02},{x:W*.04,y:H*.33},{x:W*.83,y:H*.02},{x:W*.83,y:H*.33}][lane];
  },
  wolfPos(pos){
    const {W,H}=this.sz();
    return [{x:W*.11,y:H*.65},{x:W*.11,y:H*.76},{x:W*.70,y:H*.65},{x:W*.66,y:H*.76}][pos];
  },
  laneSeg(lane){
    const {W,H}=this.sz();
    return [
      {sx:W*.15,sy:H*.12,ex:W*.23,ey:H*.68},
      {sx:W*.15,sy:H*.43,ex:W*.27,ey:H*.77},
      {sx:W*.85,sy:H*.12,ex:W*.77,ey:H*.68},
      {sx:W*.85,sy:H*.43,ex:W*.73,ey:H*.77},
    ][lane];
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WOLF
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Wolf = (() => {
  let pos=0;
  function place(){
    const p=GF.wolfPos(pos);
    const el=document.getElementById('wolf');
    el.style.left=p.x+'px'; el.style.top=p.y+'px';
  }
  function highlight(){
    for(let i=0;i<4;i++){
      const el=document.getElementById('btn-'+i);
      if(el) el.classList.toggle('active-pos', i===pos);
    }
  }
  return {
    get pos(){ return pos; },
    moveTo(p){ pos=p; place(); highlight(); Sound.playClick(); },
    render(){ place(); highlight(); },
    reset(){ pos=0; place(); highlight(); }
  };
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EGG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
class Egg {
  constructor(lane){
    this.lane=lane; this.step=0; this.active=true;
    this.el=document.createElement('div');
    this.el.className='egg'; this.el.textContent='ğŸ¥š';
    document.getElementById('field-inner').appendChild(this.el);
    this.render();
    const ch=document.getElementById('chicken-'+lane);
    if(ch){ ch.classList.add('lay'); setTimeout(()=>ch.classList.remove('lay'),400); }
  }
  render(){ const p=GF.eggPos(this.lane,this.step); this.el.style.left=p.x+'px'; this.el.style.top=p.y+'px'; }
  advance(){ this.step++; this.render(); }
  catch(){
    this.active=false; this.el.classList.add('caught');
    setTimeout(()=>this.el.remove(),450);
  }
  break(){
    this.active=false; this.el.classList.add('broken');
    const s=document.createElement('div'); s.className='splat'; s.textContent='ğŸ’¥';
    const p=GF.eggPos(this.lane,this.step);
    s.style.left=p.x+'px'; s.style.top=p.y+'px';
    document.getElementById('field-inner').appendChild(s);
    setTimeout(()=>s.remove(),920); setTimeout(()=>this.el.remove(),560);
  }
  destroy(){ this.active=false; if(this.el.parentNode) this.el.remove(); }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN GAME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Game = (() => {
  let mode='A', eggs=[], occ=[false,false,false,false];
  let running=false, paused=false, frameId=null;
  let moveDelay=500, spawnDelay=2000;
  let mt=0, st=0, lt=0;

  function calcSpeed(){
    const f=Math.pow(0.9,Math.floor(Score.score/50));
    moveDelay =Math.max(mode==='A'?200:150, Math.round((mode==='A'?500:380)*f));
    spawnDelay=Math.max(mode==='A'?600:400, Math.round((mode==='A'?2000:1400)*f));
  }

  function spawnEgg(){
    const free=[0,1,2,3].filter(i=>!occ[i]);
    if(!free.length) return;
    const lane=free[Math.floor(Math.random()*free.length)];
    occ[lane]=true; eggs.push(new Egg(lane));
  }

  function tickEggs(){
    for(let i=eggs.length-1;i>=0;i--){
      const e=eggs[i];
      if(!e.active){ eggs.splice(i,1); continue; }
      if(e.step>=3){
        if(Wolf.pos===e.lane){
          e.catch(); Score.add(); Sound.playCapture(); calcSpeed();
        } else {
          e.break(); const m=Score.addMiss(); Sound.playMiss();
          const field=document.getElementById('game-field');
          field.classList.add('shake'); setTimeout(()=>field.classList.remove('shake'),340);
          field.classList.add('flash-red'); setTimeout(()=>field.classList.remove('flash-red'),420);
          occ[e.lane]=false; eggs.splice(i,1);
          if(m>=3){ running=false; setTimeout(endGame,700); return; }
          continue;
        }
        occ[e.lane]=false; eggs.splice(i,1);
      } else { e.advance(); }
    }
  }

  function loop(ts){
    if(!running||paused) return;
    const dt=Math.min(ts-lt,200); lt=ts;
    mt+=dt; st+=dt;
    if(st>=spawnDelay){ st=0; spawnEgg(); }
    if(mt>=moveDelay) { mt=0; tickEggs(); }
    if(running&&!paused) frameId=requestAnimationFrame(loop);
  }

  function clearEggs(){ eggs.forEach(e=>e.destroy()); eggs=[]; occ=[false,false,false,false]; }

  function layoutField(){
    const field=document.getElementById('game-field');
    const hh=document.querySelector('.game-header')?.offsetHeight||60;
    const ch=document.querySelector('.game-controls')?.offsetHeight||70;
    const lh=document.querySelector('.logo')?.offsetHeight||0;
    const avail=window.innerHeight-hh-ch-lh-12;
    field.style.height=Math.max(250,Math.min(avail,430))+'px';
    for(let i=0;i<4;i++){
      const c=document.getElementById('chicken-'+i);
      const p=GF.chickenPos(i); c.style.left=p.x+'px'; c.style.top=p.y+'px';
    }
    document.querySelectorAll('.lane').forEach(l=>l.remove());
    for(let i=0;i<4;i++) drawLane(i);
    Wolf.render();
  }

  function drawLane(lane){
    const s=GF.laneSeg(lane);
    const dx=s.ex-s.sx, dy=s.ey-s.sy;
    const len=Math.sqrt(dx*dx+dy*dy), angle=Math.atan2(dy,dx)*180/Math.PI;
    const el=document.createElement('div');
    el.className='lane';
    el.style.cssText=`width:${len}px;height:9px;left:${s.sx}px;top:${s.sy}px;transform:rotate(${angle}deg)`;
    document.getElementById('field-inner').appendChild(el);
  }

  function endGame(){
    if(frameId){ cancelAnimationFrame(frameId); frameId=null; }
    clearEggs(); Sound.playGameOver();
    const isNew=Score.saveHs();
    setTimeout(()=>UI.showGameOver(isNew),450);
  }

  return {
    start(m){
      mode=m; Score.reset(); Wolf.reset();
      document.getElementById('mode-display').textContent='Ğ ĞµĞ¶Ğ¸Ğ¼ '+m;
      UI.showGame();
      setTimeout(()=>{
        layoutField(); calcSpeed(); clearEggs();
        running=true; paused=false;
        mt=0; st=spawnDelay*0.4; lt=performance.now();
        frameId=requestAnimationFrame(loop);
      },120);
    },
    restart(){
      document.getElementById('overlay-gameover').style.display='none';
      Game.start(mode);
    },
    pause(){
      if(!running||paused) return;
      paused=true;
      if(frameId){ cancelAnimationFrame(frameId); frameId=null; }
      UI.showPause();
    },
    resume(){
      paused=false; UI.hidePause();
      lt=performance.now();
      frameId=requestAnimationFrame(loop);
    },
    toMenu(){
      running=false; paused=false;
      if(frameId){ cancelAnimationFrame(frameId); frameId=null; }
      clearEggs();
      document.getElementById('overlay-gameover').style.display='none';
      document.getElementById('overlay-pause').style.display='none';
      UI.showMenu();
    }
  };
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KEYBOARD CONTROLS â€” Arrow Keys
//
// Ğ”Ğ²Ğµ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ğ¾ÑĞ¸:
//   â† / â†’ = Ğ²Ñ‹Ğ±Ğ¾Ñ€ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹ (Ğ»ĞµĞ²Ğ°Ñ / Ğ¿Ñ€Ğ°Ğ²Ğ°Ñ)
//   â†‘ / â†“ = Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¶Ñ‘Ğ»Ğ¾Ğ±Ğ° (Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ / Ğ½Ğ¸Ğ¶Ğ½Ğ¸Ğ¹)
//
// ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ ÑĞ²Ğ¾Ñ Ğ¾ÑÑŒ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰Ğ°ĞµÑ‚ Ğ²Ğ¾Ğ»ĞºĞ°.
// pos: 0=Ğ»ĞµĞ²Ğ¾-Ğ²ĞµÑ€Ñ…, 1=Ğ»ĞµĞ²Ğ¾-Ğ½Ğ¸Ğ·, 2=Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ²ĞµÑ€Ñ…, 3=Ğ¿Ñ€Ğ°Ğ²Ğ¾-Ğ½Ğ¸Ğ·
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
{
  let axisLeft=true;  // â† = true, â†’ = false
  let axisTop =true;  // â†‘ = true, â†“ = false

  function calcPos(){
    if( axisLeft &&  axisTop) return 0;
    if( axisLeft && !axisTop) return 1;
    if(!axisLeft &&  axisTop) return 2;
    return 3;
  }

  function gameIsActive(){
    return document.getElementById('screen-game').classList.contains('active');
  }

  document.addEventListener('keydown', e => {
    if(!gameIsActive()) return;
    switch(e.key){
      case 'ArrowLeft':  axisLeft=true;  Wolf.moveTo(calcPos()); e.preventDefault(); break;
      case 'ArrowRight': axisLeft=false; Wolf.moveTo(calcPos()); e.preventDefault(); break;
      case 'ArrowUp':    axisTop=true;   Wolf.moveTo(calcPos()); e.preventDefault(); break;
      case 'ArrowDown':  axisTop=false;  Wolf.moveTo(calcPos()); e.preventDefault(); break;
      case 'Escape': case ' ':
        if(document.getElementById('overlay-pause').style.display==='flex') Game.resume();
        else Game.pause();
        e.preventDefault(); break;
    }
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESIZE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('resize', ()=>{
  if(!document.getElementById('screen-game').classList.contains('active')) return;
  const field=document.getElementById('game-field');
  const hh=document.querySelector('.game-header')?.offsetHeight||60;
  const ch=document.querySelector('.game-controls')?.offsetHeight||70;
  const lh=document.querySelector('.logo')?.offsetHeight||0;
  field.style.height=Math.max(250,Math.min(window.innerHeight-hh-ch-lh-12,430))+'px';
  for(let i=0;i<4;i++){
    const c=document.getElementById('chicken-'+i);
    const p=GF.chickenPos(i); c.style.left=p.x+'px'; c.style.top=p.y+'px';
  }
  document.querySelectorAll('.lane').forEach(l=>l.remove());
  for(let i=0;i<4;i++){
    const s=GF.laneSeg(i);
    const dx=s.ex-s.sx, dy=s.ey-s.sy;
    const len=Math.sqrt(dx*dx+dy*dy), angle=Math.atan2(dy,dx)*180/Math.PI;
    const el=document.createElement('div'); el.className='lane';
    el.style.cssText=`width:${len}px;height:9px;left:${s.sx}px;top:${s.sy}px;transform:rotate(${angle}deg)`;
    document.getElementById('field-inner').appendChild(el);
  }
  Wolf.render();
});

// Init
Score.updateMenuHs();
</script>
</body>
</html>
